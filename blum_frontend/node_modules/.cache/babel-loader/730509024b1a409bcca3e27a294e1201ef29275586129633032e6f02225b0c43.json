{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\joaow\\\\blum\\\\blum_frontend\\\\src\\\\Pages\\\\OrdersPage.jsx\",\n  _s = $RefreshSig$();\nimport { useState, useEffect } from \"react\";\nimport OrdersForm from \"../components/OrdersForm\";\nimport apiService from \"../apiService\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst OrdersPage = ({\n  userRole,\n  userId,\n  brands,\n  setBrands\n}) => {\n  _s();\n  const [orders, setOrders] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [showForm, setShowForm] = useState(false);\n  const fetchOrders = async () => {\n    setLoading(true);\n    try {\n      const data = await apiService.getOrders(userId);\n      // garante que orders seja sempre um array\n      setOrders(Array.isArray(data) ? data : []);\n    } catch (error) {\n      console.error(\"Erro ao buscar pedidos:\", error);\n    } finally {\n      setLoading(false);\n    }\n  };\n  useEffect(() => {\n    fetchOrders();\n  }, [userId]);\n  const handleOrderAdded = () => {\n    fetchOrders();\n    setShowForm(false);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"p-6\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"text-2xl font-bold mb-4\",\n      children: \"Pedidos\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"mb-4 px-4 py-2 bg-blue-600 text-white rounded-lg\",\n      onClick: () => setShowForm(!showForm),\n      children: showForm ? \"Cancelar\" : \"Novo Pedido\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 7\n    }, this), showForm && /*#__PURE__*/_jsxDEV(OrdersForm, {\n      userId: userId // garante envio correto do ID\n      ,\n      onOrderAdded: handleOrderAdded,\n      onCancel: () => setShowForm(false),\n      brands: brands\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 9\n    }, this), loading ? /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Carregando pedidos...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 9\n    }, this) : orders.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Nenhum pedido encontrado.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"ul\", {\n      className: \"divide-y divide-gray-200\",\n      children: orders.map((order, index) => {\n        var _order$totalPrice;\n        return /*#__PURE__*/_jsxDEV(\"li\", {\n          className: \"py-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Cliente:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 60,\n              columnNumber: 17\n            }, this), \" \", order.clientId || \"Desconhecido\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 59,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Status:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 63,\n              columnNumber: 17\n            }, this), \" \", order.status || \"Não definido\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 62,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Total:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 66,\n              columnNumber: 17\n            }, this), \" R$\", ((_order$totalPrice = order.totalPrice) === null || _order$totalPrice === void 0 ? void 0 : _order$totalPrice.toFixed(2)) || \"0.00\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 65,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: /*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Itens:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 69,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 68,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n            className: \"pl-4 list-disc\",\n            children: Array.isArray(order.items) && order.items.length > 0 ? order.items.map((item, idx) => {\n              var _item$price;\n              return /*#__PURE__*/_jsxDEV(\"li\", {\n                children: [item.productName || \"Produto desconhecido\", \" (\", item.quantity || 0, \" x R$\", ((_item$price = item.price) === null || _item$price === void 0 ? void 0 : _item$price.toFixed(2)) || \"0.00\", \")\"]\n              }, idx, true, {\n                fileName: _jsxFileName,\n                lineNumber: 74,\n                columnNumber: 21\n              }, this);\n            }) : /*#__PURE__*/_jsxDEV(\"li\", {\n              children: \"Sem itens\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 81,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 15\n          }, this)]\n        }, order.id || index, true, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 13\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 33,\n    columnNumber: 5\n  }, this);\n};\n_s(OrdersPage, \"Dk8bHdRNCqJTLkzMQX6v44TZ7eY=\");\n_c = OrdersPage;\nexport default OrdersPage;\nvar _c;\n$RefreshReg$(_c, \"OrdersPage\");","map":{"version":3,"names":["useState","useEffect","OrdersForm","apiService","jsxDEV","_jsxDEV","OrdersPage","userRole","userId","brands","setBrands","_s","orders","setOrders","loading","setLoading","showForm","setShowForm","fetchOrders","data","getOrders","Array","isArray","error","console","handleOrderAdded","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","onOrderAdded","onCancel","length","map","order","index","_order$totalPrice","clientId","status","totalPrice","toFixed","items","item","idx","_item$price","productName","quantity","price","id","_c","$RefreshReg$"],"sources":["C:/Users/joaow/blum/blum_frontend/src/Pages/OrdersPage.jsx"],"sourcesContent":["import { useState, useEffect } from \"react\";\r\nimport OrdersForm from \"../components/OrdersForm\";\r\nimport apiService from \"../apiService\";\r\n\r\nconst OrdersPage = ({ userRole, userId, brands, setBrands }) => {\r\n  const [orders, setOrders] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [showForm, setShowForm] = useState(false);\r\n\r\n  const fetchOrders = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const data = await apiService.getOrders(userId);\r\n      // garante que orders seja sempre um array\r\n      setOrders(Array.isArray(data) ? data : []);\r\n    } catch (error) {\r\n      console.error(\"Erro ao buscar pedidos:\", error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchOrders();\r\n  }, [userId]);\r\n\r\n  const handleOrderAdded = () => {\r\n    fetchOrders();\r\n    setShowForm(false);\r\n  };\r\n\r\n  return (\r\n    <div className=\"p-6\">\r\n      <h1 className=\"text-2xl font-bold mb-4\">Pedidos</h1>\r\n      <button\r\n        className=\"mb-4 px-4 py-2 bg-blue-600 text-white rounded-lg\"\r\n        onClick={() => setShowForm(!showForm)}\r\n      >\r\n        {showForm ? \"Cancelar\" : \"Novo Pedido\"}\r\n      </button>\r\n\r\n      {showForm && (\r\n        <OrdersForm\r\n          userId={userId} // garante envio correto do ID\r\n          onOrderAdded={handleOrderAdded}\r\n          onCancel={() => setShowForm(false)}\r\n          brands={brands}\r\n        />\r\n      )}\r\n\r\n      {loading ? (\r\n        <p>Carregando pedidos...</p>\r\n      ) : orders.length === 0 ? (\r\n        <p>Nenhum pedido encontrado.</p>\r\n      ) : (\r\n        <ul className=\"divide-y divide-gray-200\">\r\n          {orders.map((order, index) => (\r\n            <li key={order.id || index} className=\"py-2\">\r\n              <p>\r\n                <strong>Cliente:</strong> {order.clientId || \"Desconhecido\"}\r\n              </p>\r\n              <p>\r\n                <strong>Status:</strong> {order.status || \"Não definido\"}\r\n              </p>\r\n              <p>\r\n                <strong>Total:</strong> R${order.totalPrice?.toFixed(2) || \"0.00\"}\r\n              </p>\r\n              <p>\r\n                <strong>Itens:</strong>\r\n              </p>\r\n              <ul className=\"pl-4 list-disc\">\r\n                {Array.isArray(order.items) && order.items.length > 0 ? (\r\n                  order.items.map((item, idx) => (\r\n                    <li key={idx}>\r\n                      {item.productName || \"Produto desconhecido\"} (\r\n                      {item.quantity || 0} x R$\r\n                      {item.price?.toFixed(2) || \"0.00\"})\r\n                    </li>\r\n                  ))\r\n                ) : (\r\n                  <li>Sem itens</li>\r\n                )}\r\n              </ul>\r\n            </li>\r\n          ))}\r\n        </ul>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default OrdersPage;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}